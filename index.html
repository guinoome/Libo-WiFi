<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="resources/index.css" type="text/css" />
<link rel="stylesheet" href="resources/adminlte.min.css" type="text/css" />

<!-- This is the script that forces client to open regular browser -->
<script src="resources/forced_browser.js"></script>

<style>
  .custom-swal-width {
      width: 380px;
  }
  label{
    display: block;
    margin-bottom: 5px;
    margin-top: 5px;
  }
  /* Mobile responsive tweaks */
  @media (max-width: 576px) {
    .card {
      width: 100% !important;
      border-radius: 10px;
    }
    .container {
      padding-left: 5px;
      padding-right: 5px;
    }
    #voucherCode, #numberInput {
      font-size: 1rem !important;
    }
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    loadVoucherStoreContent();
  });

  function loadVoucherStoreContent() {
    document.getElementById("login").classList.add("show");
    document.getElementById("login").classList.add("active");
  }
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
      const operHint = document.getElementById("oper-hint");
  
      const observer = new MutationObserver((mutations) => {
          mutations.forEach((mutation) => {
              if (mutation.type === "childList" && operHint.innerText) {
                  Swal.fire({
                      title: "Notice",
                      text: operHint.innerText, 
                      icon: "warning",          
                      confirmButtonText: "OK",
                  }).then(() => {
                      setTimeout(() => {
                      }, 3000);
                  });
              }
          });
      });
  
      observer.observe(operHint, { childList: true });
  });
</script>

<body class="portal">

  <div>
    <div class="wave"></div>
    <div class="wave"></div>
  </div>
  
  <img class="mx-auto d-block img-fluid mt-2" src="resources/logo.png" style="width: 120px; height: auto; margin-bottom: 10px; border-radius: 5px;">

  <div class="container">
    <div class="row justify-content-center p-3">
      <div class="card card-outline card-tabs" style="width: 480px; border-radius: 15px;">
        <div class="card-header p-0 pt-1 border-bottom-0 ml-2">
          <ul class="nav nav-tabs" id="klcis-tab" role="tablist">

            <li class="nav-item">
              <a class="nav-link active" id="login-tab" data-toggle="pill" href="#login" role="tab" aria-controls="login" aria-selected="true">Login</a>
            </li>

            <!-- Hide E-Voucher tab -->
            <li class="nav-item" style="display:none;">
              <a class="nav-link" id="voucher-tab" data-toggle="pill" href="#voucher" role="tab" aria-controls="voucher" aria-selected="false">E-Voucher</a>
            </li>

            <!-- Hide Transactions tab -->
            <li class="nav-item" style="display:none;">
              <a class="nav-link" id="transactions-tab" data-toggle="pill" href="#transactions" role="tab" aria-controls="transactions" aria-selected="false">Transactions</a>
            </li>

          </ul>
        </div>

        <div class="card-body">
          <div class="tab-content" id="klcis-tabContent">

            <!-- LOGIN TAB -->
            <div class="tab-pane fade" id="login" role="tabpanel" aria-labelledby="login-tab">

              <p class="text-center text-gray h6">Enter the voucher and enjoy FREE Movies.</p>
              <div class="oper-section-outer">
                <div class="oper-section-inner">
                  <span id="oper-hint" style="color: red; display: none;"></span>
                  <div id="hotspot-section">
                    <select id="hotspot-selector" class="oper-section-item" style="display:none;"></select>
                  </div>
                  <form id="login-form">
                    <div id="input-voucher">
                      <input id="voucherCode" class="oper-section-item input" name="voucherCode" type="text" placeholder="Voucher Code" />
                    </div>                         
                    <button id="button-login" class="btn btn-block btn-warning btn-lg text-white">LOGIN</button>
                  </form>
                </div>
              </div>

              <!-- COPIED E-VOUCHER FORM -->
              <hr>
              <h6 class="text-center text-muted mb-3">Also Available in E-Voucher</h6>
              <form id="paymentForm" action="https://s2.klinternetservices.com/xendit/ewallet" method="GET">
                <input type="hidden" class="form-control" id="method" name="method" value="">
                <div class="form-group mt-3">
                  <label class="text-muted text-sm" for="amountDropdown">Select promo:</label>
                  <select id="amountDropdown" name="amount" class="form-control text-lg btn-block">
                    <option value="12">₱12.00 - 7 Hours UNLI WiFi</option>
                    <option value="25">₱25.00 - 1 Day UNLI WiFi</option>
                    <option value="60">₱60.00 - 3 Days UNLI WiFi</option>
                    <option value="95">₱95.00 - 7 Days UNLI WiFi</option>
                  </select>
                  <input type="hidden" class="form-control" id="tokenInput" name="token" value="7z62ZWE2ORTHHJ6N1PZIZ5hfb">
                  <label class="text-muted text-sm mt-1" for="numberInput">Mobile number for SMS notification:</label>
                  <input type="tel" id="numberInput" class="form-control text-center text-lg" style="width:100%; letter-spacing: 3px;" placeholder="e.g. 09912346789" name="number" pattern="[0]{1}[9]{1}[0-9]{9}" autocomplete="tel" required>
                </div>
                <button type="submit" class="btn btn-md btn-primary btn-block rounded-pill" id="gcash"><img src="resources/gcash_logo.png" style="height: 28px; width: 120px;"></button>
                <button type="submit" class="btn btn-md btn-success btn-block rounded-pill" id="maya"><img src="resources/maya_logo.png" style="height: 25px; width: 80px;"></button>
                <button type="submit" class="btn btn-md btn-warning btn-block rounded-pill" id="spay"><img src="resources/spay_logo.png" style="height: 28px; width: 75px;"></button>
              </form>
              <div class="text-center">                  
                <button class="btn btn-md btn-primary rounded-pill mt-2" id="generate_qr"><i class="fas fa-qrcode"></i> Generate QR</button>                
              </div>
              <div id="qrcode" style="display: none;"></div>

            </div>

            <!-- ORIGINAL E-VOUCHER TAB -->
            <div class="tab-pane fade" id="voucher" role="tabpanel" aria-labelledby="voucher-tab">
              <form id="paymentForm" action="https://s2.klinternetservices.com/xendit/ewallet" method="GET">
                <input type="hidden" class="form-control" id="method" name="method" value=""></input> 
                <div class="form-group mt-3">
                  <label class="text-muted text-sm" for="amountDropdown">Select promo:</label>
                  <select id="amountDropdown" name="amount" class="form-control text-lg btn-block">
                    <option value="12">₱12.00 - 7 Hours UNLI WiFi</option>
                    <option value="25">₱25.00 - 1 Day UNLI WiFi</option>
                    <option value="60">₱60.00 - 3 Days UNLI WiFi</option>
                    <option value="95">₱95.00 - 7 Days UNLI WiFi</option>
                    <option value="160">₱160.00 - 15 Days UNLI WiFi</option>
                    <option value="300">₱300.00 - 1 Month UNLI WiFi</option>
                  </select>
                  <input type="hidden" class="form-control" id="tokenInput" name="token" value="7z62ZWE2ORTHHJ6N1PZIZ5hfb">
                  <label class="text-muted text-sm mt-1" for="numberInput">Mobile number for SMS notification:</label>
                  <input type="tel" id="numberInput" class="form-control text-center text-lg" style="width:100%; letter-spacing: 3px;" placeholder="e.g. 09912346789" name="number" pattern="[0]{1}[9]{1}[0-9]{9}" autocomplete="tel" required>
                </div>
                <button type="submit" class="btn btn-md btn-primary btn-block rounded-pill" id="gcash"><img src="resources/gcash_logo.png" style="height: 28px; width: 120px;"></button>
                <button type="submit" class="btn btn-md btn-success btn-block rounded-pill" id="maya"><img src="resources/maya_logo.png" style="height: 25px; width: 80px;"></button>
                <button type="submit" class="btn btn-md btn-warning btn-block rounded-pill" id="spay"><img src="resources/spay_logo.png" style="height: 28px; width: 75px;"></button>
              </form>
              <div class="text-center">                  
                <button class="btn btn-md btn-primary rounded-pill mt-2" id="generate_qr"><i class="fas fa-qrcode"></i> Generate QR</button>                
              </div>
              <div id="qrcode" style="display: none;"></div>               
            </div>

            <!-- TRANSACTIONS TAB (hidden in nav but kept for compatibility) -->
            <div class="tab-pane fade" id="transactions" role="tabpanel" aria-labelledby="transactions-tab">
              ... (unchanged transactions content) ...
            </div>

          </div>
          <hr>
        </div>
      </div>      
    </div>
  </div>   

<!-- END OF KLCIS VOUCHER SYSTEM CODE -->

<!-- KLCiS Necessary scripts! DO NOT REMOVE! -->
<script src="resources/index.js"></script>
<script src="resources/qr.js"></script>
<script src="resources/jquery.min.js"></script>
<script src="resources/klcis.js"></script
